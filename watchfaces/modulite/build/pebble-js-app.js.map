{"version":3,"sources":["webpack/bootstrap 40b9b13a0cfb6b5ad142","/Users/edwinfinch/Library/Application Support/Pebble SDK/SDKs/4.3/sdk-core/pebble/common/include/_pkjs_shared_additions.js","./src/pkjs/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,EAAC;;;;;;;ACnBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAiC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAkB,4BAA4B;AAC9C;AACA;AACA;AACA;;;AAGA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,G","file":"pebble-js-app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 40b9b13a0cfb6b5ad142","(function(p) {\n  if (!p === undefined) {\n    console.error('Pebble object not found!?');\n    return;\n  }\n\n  // Aliases:\n  p.on = p.addEventListener;\n  p.off = p.removeEventListener;\n\n  // For Android (WebView-based) pkjs, print stacktrace for uncaught errors:\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('error', function(event) {\n      if (event.error && event.error.stack) {\n        console.error('' + event.error + '\\n' + event.error.stack);\n      }\n    });\n  }\n\n})(Pebble);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/edwinfinch/Library/Application Support/Pebble SDK/SDKs/4.3/sdk-core/pebble/common/include/_pkjs_shared_additions.js\n// module id = 1\n// module chunks = 0","var CLEAR_DAY = 0;\nvar CLEAR_NIGHT = 1;\nvar WINDY = 2;\nvar COLD = 3;\nvar PARTLY_CLOUDY_DAY = 4;\nvar PARTLY_CLOUDY_NIGHT = 5;\nvar HAZE = 6;\nvar CLOUD = 7;\nvar RAIN = 8;\nvar SNOW = 9;\nvar HAIL = 10;\nvar CLOUDY = 11;\nvar STORM = 12;\nvar NA = 13;\n\nvar imageId = {\n  0 : STORM, //tornado\n  1 : STORM, //tropical storm\n  2 : STORM, //hurricane\n  3 : STORM, //severe thunderstorms\n  4 : STORM, //thunderstorms\n  5 : HAIL, //mixed rain and snow\n  6 : HAIL, //mixed rain and sleet\n  7 : HAIL, //mixed snow and sleet\n  8 : HAIL, //freezing drizzle\n  9 : RAIN, //drizzle\n  10 : HAIL, //freezing rain\n  11 : RAIN, //showers\n  12 : RAIN, //showers\n  13 : SNOW, //snow flurries\n  14 : SNOW, //light snow showers\n  15 : SNOW, //blowing snow\n  16 : SNOW, //snow\n  17 : HAIL, //hail\n  18 : HAIL, //sleet\n  19 : HAZE, //dust\n  20 : HAZE, //foggy\n  21 : HAZE, //haze\n  22 : HAZE, //smoky\n  23 : WINDY, //blustery\n  24 : WINDY, //windy\n  25 : COLD, //cold\n  26 : CLOUDY, //cloudy\n  27 : CLOUDY, //mostly cloudy (night)\n  28 : CLOUDY, //mostly cloudy (day)\n  29 : PARTLY_CLOUDY_NIGHT, //partly cloudy (night)\n  30 : PARTLY_CLOUDY_DAY, //partly cloudy (day)\n  31 : CLEAR_NIGHT, //clear (night)\n  32 : CLEAR_DAY, //sunny\n  33 : CLEAR_NIGHT, //fair (night)\n  34 : CLEAR_DAY, //fair (day)\n  35 : HAIL, //mixed rain and hail\n  36 : CLEAR_DAY, //hot\n  37 : STORM, //isolated thunderstorms\n  38 : STORM, //scattered thunderstorms\n  39 : STORM, //scattered thunderstorms\n  40 : STORM, //scattered showers\n  41 : SNOW, //heavy snow\n  42 : SNOW, //scattered snow showers\n  43 : SNOW, //heavy snow\n  44 : CLOUD, //partly cloudy\n  45 : STORM, //thundershowers\n  46 : SNOW, //snow showers\n  47 : STORM, //isolated thundershowers\n  3200 : NA, //not available\n};\n\nvar options = JSON.parse(localStorage.getItem('options'));\n//console.log('read options: ' + JSON.stringify(options));\nif (options === null) options = { \"custom_location\" : \"\",\n                                  \"use_celsius\" : false};\n\nvar xhrRequest = function (url, type, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function () {\n        callback(this.responseText);\n    };\n    xhr.open(type, url);\n    xhr.send();\n};\n\nfunction getWeatherFromLatLong(latitude, longitude) {\n/*\n * RIP OpenStreetMap weather querys\n * Dec. 2015-Feb. 2016\n * You will never be forgotten and will always be missed\n *\n var url = 'http://nominatim.openstreetmap.org/reverse?format=json&lat=' + latitude + '&lon=' + longitude;\n*/\n\n    var query = encodeURI('select woeid from geo.places where text=\"(' + latitude + ',' + longitude + ')\" limit 1');\n    var url = \"http://query.yahooapis.com/v1/public/yql?q=\" + query + \"&format=json\";\n\n    // console.log(\"Reverse geocoding url: \" + url);\n\n    xhrRequest(url, 'GET',\n        function(responseText) {\n            var json = JSON.parse(responseText);\n            var location = json.query.results.place.woeid;\n\n            getWeatherFromWoeid(location);\n        }\n    );\n}\n\nfunction getWeatherFromLocation(location_name) {\n  var response;\n  var woeid = -1;\n\n  var query = encodeURI(\"select woeid from geo.places(1) where text=\\\"\" + location_name + \"\\\"\");\n  var url = \"http://query.yahooapis.com/v1/public/yql?q=\" + query + \"&format=json\";\n  console.log(url);\n  var req = new XMLHttpRequest();\n  req.open('GET', url, true);\n  req.onload = function(e) {\n    if (req.readyState == 4) {\n      if (req.status == 200) {\n        console.log(req.responseText);\n        response = JSON.parse(req.responseText);\n        if (response) {\n          woeid = response.query.results.place.woeid;\n        //   console.log(\"Got WOEID of \" + woeid);\n          getWeatherFromWoeid(woeid);\n        }\n      } else {\n        console.log(\"Error in getting weather from location: \" + e);\n      }\n    }\n  };\n  req.send(null);\n}\n\nfunction getWeatherFromWoeid(woeid) {\n  var query = encodeURI(\"select item.condition from weather.forecast where woeid = \" + woeid +\n                        \" and u = \" + (false ? \"\\\"c\\\"\" : \"\\\"f\\\"\"));\n  var url = \"http://query.yahooapis.com/v1/public/yql?q=\" + query + \"&format=json\";\n\n  var response;\n  var req = new XMLHttpRequest();\n  console.log(\"Fetching weather from \" + url);\n  req.open('GET', url, true);\n  req.onload = function(e) {\n    if (req.readyState == 4) {\n      if (req.status == 200) {\n        //   console.log(\"got weather data \" + req.responseText);\n        response = JSON.parse(req.responseText);\n        if (response) {\n          var condition = response.query.results.channel.item.condition;\n          var icon = imageId[condition.code];\n        //   console.log(\"temp \" + condition.temp);\n        //   console.log(\"icon \" + condition.code);\n        //   console.log(\"condition \" + condition.text);\n          var fixedTemp = parseInt(condition.temp);\n          if(options.use_celsius){\n              console.log(\"User is using the best temperature scale\");\n              fixedTemp -= 32;\n              fixedTemp = Math.ceil(fixedTemp*(5/9));\n          }\n          var message = {\n            \"icon\" : icon,\n            \"temperature\" : fixedTemp\n          };\n       console.log(\"Sending message through WOEID \" + JSON.stringify(message));\n          Pebble.sendAppMessage(message);\n        }\n      } else {\n        console.log(\"Error from getting through WOEID: \" + e);\n      }\n    }\n  };\n  req.send(null);\n}\n\nvar locationOptions = {\n  \"timeout\": 15000,\n  \"maximumAge\": 60000\n};\n\nfunction updateWeather() {\n  if (options.custom_location.length < 1) {\n    navigator.geolocation.getCurrentPosition(locationSuccess,\n                                                    locationError,\n                                                    locationOptions);\n  } else {\n    getWeatherFromLocation(options.custom_location);\n  }\n}\n\nfunction locationSuccess(pos) {\n  var coordinates = pos.coords;\n  getWeatherFromLatLong(coordinates.latitude, coordinates.longitude);\n}\n\nfunction locationError(err) {\n  console.warn('location error (' + err.code + '): ' + err.message);\n  Pebble.sendAppMessage({\n    \"icon\":11,\n    \"temperature\":\"\"\n  });\n}\n\nvar APP_NAME = \"modulite\";\nvar OPTIONS = \"options\";\nvar APP_UUID = \"4a5b2a1c-2493-416c-ac5a-cf6dc9c3d815\";\nvar GLOBAL_SETTINGS = [\n    \"dateFormat\"\n];\n\nvar settingURL = (\"https://www.lignite.me/pebble/settings/\" + APP_NAME);\n\nfunction getGlobalSettingsString(){\n    if(GLOBAL_SETTINGS.length < 1 || !GLOBAL_SETTINGS){\n        return undefined;\n    }\n    var string = \"\";\n    for(var i = 0; i < GLOBAL_SETTINGS.length; i++){\n        string += GLOBAL_SETTINGS[i] + \"-\";\n    }\n    return string.substring(0, string.length-1);\n}\n\n\nPebble.addEventListener(\"showConfiguration\", function(e) {\n    Pebble.openURL(settingURL);\n});\n\nPebble.addEventListener(\"webviewclosed\", function(e) {\n    if (e.response) {\n        // console.log(\"Got \" + e.response);\n        options = JSON.parse(e.response);\n        if(options){\n            // console.log(JSON.stringify(options));\n            localStorage.setItem(OPTIONS, JSON.stringify(options));\n            Pebble.sendAppMessage(options);\n\n            updateWeather();\n        }\n    }\n});\n\nPebble.addEventListener(\"appmessage\", function(e) {\n    if(e.payload.request_weather) {\n        updateWeather();\n    }\n});\n\nPebble.addEventListener(\"ready\", function(e) {\n    updateWeather();\n});\n\n/*\nHi!\n\nCan you please not bother our APIs or anything?\nIt's ok to snoop around, though we kindly ask that you don't try to do any harm.\nAnd if any exploits are found, email us: contact@lignite.io, we'd love to talk\nand maybe even work something out!\n\nThank you :)\n-Team Lignite\n*/\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pkjs/index.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}